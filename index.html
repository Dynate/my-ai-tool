<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Studio Pro - High Quality Generator</title>
    <script src="https://js.puter.com/v2/"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; text-align: center; padding: 20px; background-color: #f0f2f5; max-width: 800px; margin: 0 auto; color: #333; }
        
        /* ADS */
        .ad-banner { width: 100%; height: 90px; background: #e0e0e0; margin: 20px 0; border: 1px dashed #999; display: flex; align-items: center; justify-content: center; color: #666; font-size: 14px; border-radius: 8px; }

        .container { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        
        /* STYLE SELECTOR (GLOBAL) */
        .style-box { background: #eef2f7; padding: 15px; border-radius: 10px; margin-bottom: 20px; text-align: left; border: 1px solid #dce4ec; }
        
        /* TABS */
        .tabs { display: flex; justify-content: center; margin-bottom: 25px; border-bottom: 2px solid #eee; }
        .tab-btn { background: none; border: none; padding: 12px 30px; cursor: pointer; font-size: 16px; font-weight: bold; color: #777; transition: 0.3s; }
        .tab-btn:hover { color: #007bff; }
        .tab-btn.active { color: #007bff; border-bottom: 3px solid #007bff; }
        
        /* INPUTS */
        .input-group { text-align: left; margin-bottom: 20px; }
        label { display: block; font-weight: bold; margin-bottom: 8px; font-size: 14px; color: #444; }
        input[type="text"], select { width: 100%; padding: 14px; font-size: 16px; border: 2px solid #ddd; border-radius: 10px; box-sizing: border-box; transition: 0.3s; }
        input[type="text"]:focus, select:focus { border-color: #007bff; outline: none; }
        
        /* UPLOAD BOX */
        .file-upload { border: 2px dashed #007bff; padding: 20px; border-radius: 10px; text-align: center; background: #f8fbff; cursor: pointer; margin-bottom: 20px; transition: 0.2s; }
        .file-upload:hover { background: #e1f0ff; }
        .file-status { font-size: 13px; color: #007bff; margin-top: 8px; font-weight: bold; }

        /* BUTTON */
        .generate-btn { width: 100%; padding: 16px; font-size: 18px; background: linear-gradient(135deg, #007bff, #0056b3); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; transition: 0.2s; box-shadow: 0 4px 10px rgba(0,123,255,0.3); }
        .generate-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 15px rgba(0,123,255,0.4); }
        .generate-btn:disabled { background: #ccc; cursor: not-allowed; transform: none; box-shadow: none; }

        /* OUTPUT */
        .output-area { margin-top: 25px; min-height: 100px; padding: 20px; border-radius: 10px; background: #fafafa; border: 1px solid #eee; }
        img, video { max-width: 100%; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .hidden { display: none; }
        .loading { color: #007bff; font-weight: bold; animation: pulse 1.5s infinite; }
        
        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
    </style>
</head>
<body>

    <div class="ad-banner">[Ad Space - Top Banner]</div>

    <div class="container">
        <h1>âœ¨ AI Creative Studio</h1>

        <div class="style-box">
            <label>ðŸŽ¨ Choose Art Style (Improves Quality!):</label>
            <select id="globalStyle">
                <option value="">No Style (Raw)</option>
                <option value=", hyper realistic, 8k, highly detailed, cinematic lighting, professional photography, hdr, 4k texture">ðŸ“¸ Realistic Photo (Best for People)</option>
                <option value=", anime style, studio ghibli, vibrant colors, highly detailed, 4k">ðŸŽŒ Anime / Cartoon</option>
                <option value=", 3d render, unreal engine 5, octane render, pixar style, 8k, ray tracing">ðŸ§Š 3D Animation / Pixar</option>
                <option value=", cyberpunk, neon lights, futuristic, highly detailed, blade runner style">ðŸ¤– Cyberpunk / Sci-Fi</option>
                <option value=", cinematic movie shot, imax quality, dramatic lighting, detailed background, 8k">ðŸŽ¥ Movie / Cinematic (Best for Video)</option>
            </select>
        </div>
        
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('image')">Image Generator</button>
            <button class="tab-btn" onclick="switchTab('video')">Video Generator</button>
        </div>

        <div id="image-section">
            <div class="input-group">
                <label>1. Describe your image:</label>
                <input type="text" id="imgPrompt" placeholder="E.g., An astronaut riding a horse on Mars...">
            </div>
            
            <div class="input-group">
                <label>2. (Optional) Upload Reference Image:</label>
                <div class="file-upload" onclick="document.getElementById('imgUpload').click()">
                    ðŸ“‚ Upload Image
                    <input type="file" id="imgUpload" accept="image/*" onchange="showFileName('imgUpload', 'imgFileStatus')">
                    <div id="imgFileStatus" class="file-status">No file chosen</div>
                </div>
            </div>

            <button class="generate-btn" onclick="generateImage()" id="imgBtn">Generate Image</button>
            <div id="img-result" class="output-area">
                <p style="color:#aaa; font-size:14px;">Image will appear here...</p>
            </div>
        </div>

        <div id="video-section" class="hidden">
            <div class="input-group">
                <label>1. Describe the video action:</label>
                <input type="text" id="vidPrompt" placeholder="E.g., A dog running on the grass...">
            </div>

            <div class="input-group">
                <label>2. (Optional) Start with an Image:</label>
                <div class="file-upload" onclick="document.getElementById('vidUpload').click()">
                    ðŸ“‚ Upload Image
                    <input type="file" id="vidUpload" accept="image/*" onchange="showFileName('vidUpload', 'vidFileStatus')">
                    <div id="vidFileStatus" class="file-status">No file chosen</div>
                </div>
            </div>

            <button class="generate-btn" onclick="generateVideo()" id="vidBtn">Generate Video</button>
            <div id="vid-result" class="output-area">
                <p style="color:#aaa; font-size:14px;">Video will appear here...</p>
            </div>
        </div>
    </div>

    <div class="ad-banner">[Ad Space - Bottom Banner]</div>

    <script>
        function switchTab(type) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('image-section').classList.add('hidden');
            document.getElementById('video-section').classList.add('hidden');
            if (type === 'image') {
                document.querySelector('.tab-btn:nth-child(1)').classList.add('active');
                document.getElementById('image-section').classList.remove('hidden');
            } else {
                document.querySelector('.tab-btn:nth-child(2)').classList.add('active');
                document.getElementById('video-section').classList.remove('hidden');
            }
        }

        function showFileName(inputId, statusId) {
            const file = document.getElementById(inputId).files[0];
            if(file) document.getElementById(statusId).innerText = "âœ… Selected: " + file.name;
        }

        const toBase64 = file => new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = () => resolve(reader.result);
            reader.onerror = error => reject(error);
        });

        // --- IMPROVED IMAGE GENERATOR ---
        async function generateImage() {
            let prompt = document.getElementById('imgPrompt').value;
            const style = document.getElementById('globalStyle').value; // Reads the global style
            const fileInput = document.getElementById('imgUpload');
            const resultDiv = document.getElementById('img-result');
            const btn = document.getElementById('imgBtn');

            if (!prompt) return alert("Please enter a text description!");

            // Automatically adds style keywords to prompt
            prompt = prompt + style;

            btn.disabled = true;
            btn.innerText = "Generating...";
            resultDiv.innerHTML = '<p class="loading">ðŸŽ¨ Creating masterpiece... (Wait 10-20s)</p>';

            try {
                let options = {};
                if (fileInput.files.length > 0) {
                    options.input_image = await toBase64(fileInput.files[0]);
                }

                const image = await puter.ai.txt2img(prompt, options);
                resultDiv.innerHTML = '';
                resultDiv.appendChild(image);
            } catch (err) {
                console.error(err);
                resultDiv.innerHTML = '<p style="color:red">Error: ' + err.message + '</p>';
            }
            btn.disabled = false;
            btn.innerText = "Generate Image";
        }

        // --- IMPROVED VIDEO GENERATOR ---
        async function generateVideo() {
            let prompt = document.getElementById('vidPrompt').value;
            const style = document.getElementById('globalStyle').value; // Reads the SAME global style
            const fileInput = document.getElementById('vidUpload');
            const resultDiv = document.getElementById('vid-result');
            const btn = document.getElementById('vidBtn');

            if (!prompt) return alert("Please enter a text description!");

            // Automatically adds style keywords to video prompt too!
            prompt = prompt + style;

            btn.disabled = true;
            btn.innerText = "Generating Video...";
            resultDiv.innerHTML = '<p class="loading">ðŸŽ¥ Rendering High-Quality Video... (Wait 60-90s)</p>';

            try {
                let options = {};
                if (fileInput.files.length > 0) {
                    options.image = await toBase64(fileInput.files[0]);
                }

                const video = await puter.ai.txt2vid(prompt, options);
                resultDiv.innerHTML = '';
                video.controls = true;
                resultDiv.appendChild(video);
            } catch (err) {
                console.error(err);
                resultDiv.innerHTML = '<p style="color:red">Error: ' + err.message + '</p>';
            }
            btn.disabled = false;
            btn.innerText = "Generate Video";
        }
    </script>
</body>
</html>
